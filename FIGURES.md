# Figures and Outputs

This repo generates most of its diagnostics into [figs/](figs/).

## Quick view

If you just want to refresh everything:

- Run the main diagnostics: `python plot_diagnostics.py`
- Run COS-vs-FDM profiling: `python tools/profile_cos_vs_fdm_time_complexity.py`
- Run event IV surface plots:
  - Static: `python tools/plot_event_iv_surfaces.py`
  - Interactive (linked 3D): `python tools/make_linked_event_iv_surfaces.py --model vg` (or `--model merton`)

## Static PNG figures

### COS / dividends / American diagnostics (from [plot_diagnostics.py](plot_diagnostics.py))

- COS vs Black–Scholes sanity check: [figs/cos_vs_bs_gbm.png](figs/cos_vs_bs_gbm.png)

  ![COS vs BS (GBM)](figs/cos_vs_bs_gbm.png)

  What it shows: European call prices under GBM with no dividends, COS vs the analytic Black–Scholes price (plus the residual).

- American rollback: hard max vs softmax: [figs/american_hard_vs_soft.png](figs/american_hard_vs_soft.png)

  ![American hard vs soft rollback](figs/american_hard_vs_soft.png)

  What it shows: the continuation/intrinsic comparison under two rollback variants (hard max vs softmax smoothing).

- Lévy models vs equivalent GBM proxy: [figs/levy_vs_equiv_gbm.png](figs/levy_vs_equiv_gbm.png)

  ![Levy vs equivalent GBM](figs/levy_vs_equiv_gbm.png)

  What it shows: European prices under jump/Lévy models (Merton/Kou/VG) compared against a variance-matched GBM proxy.

- Dividend continuation (European vs American continuation at $t=0$): [figs/american_dividend_continuation.png](figs/american_dividend_continuation.png)

  ![American dividend continuation](figs/american_dividend_continuation.png)

  What it shows: how the dividend-aware continuation behaves at time 0, comparing European vs American continuation components.

- Through-time comparison (COS European/American vs FDM): [figs/american_through_time.png](figs/american_through_time.png)

  ![American through time](figs/american_through_time.png)

  What it shows: a through-time snapshot of values/continuation for COS (European + American rollback) alongside an FDM reference.

- Continuation value through time (with CSV):
  - Plot: [figs/continuation_through_time.png](figs/continuation_through_time.png)
  - Data: [figs/continuation_through_time.csv](figs/continuation_through_time.csv)

  ![Continuation through time](figs/continuation_through_time.png)

  What it shows: a time series view of the continuation value (and related quantities) that can be used for debugging rollback behavior.

- Forward / parity through time (with CSV):
  - Plot: [figs/forward_parity_through_time.png](figs/forward_parity_through_time.png)
  - Data: [figs/forward_parity_through_time.csv](figs/forward_parity_through_time.csv)

  ![Forward parity through time](figs/forward_parity_through_time.png)

  What it shows: forward/parity consistency checks over time in the presence of discrete dividends.

- Dividend uncertainty: COS vs Monte Carlo (with CSV):
  - Plot: [figs/cgmy_mc_vs_cos_div_uncertainty.png](figs/cgmy_mc_vs_cos_div_uncertainty.png)
  - Data: [figs/cgmy_mc_vs_cos_div_uncertainty.csv](figs/cgmy_mc_vs_cos_div_uncertainty.csv)

  ![GBM MC vs COS under dividend uncertainty](figs/gbm_mc_vs_cos_div_uncertainty.png)

  What it shows: compares COS pricing against a GBM Monte Carlo cross-check under the repo’s “cash dividend uncertainty” convention.

### COS vs FDM time/accuracy tradeoff (from [tools/profile_cos_vs_fdm_time_complexity.py](tools/profile_cos_vs_fdm_time_complexity.py))

- COS vs FDM scalability: [figs/cos_vs_fdm_time_complexity.png](figs/cos_vs_fdm_time_complexity.png)

  ![COS vs FDM time complexity](figs/cos_vs_fdm_time_complexity.png)

  What it shows: for both European and American cases, compares runtime vs error for COS (sweeping $N$) and FDM (sweeping grid sizes).

### Event implied-vol surfaces (static)

- Event IV surfaces (GBM+event vs VG+event): [figs/event_iv_surfaces_gbm_vs_vg.png](figs/event_iv_surfaces_gbm_vs_vg.png)

  ![Event IV surfaces](figs/event_iv_surfaces_gbm_vs_vg.png)

  Generated by: [tools/plot_event_iv_surfaces.py](tools/plot_event_iv_surfaces.py)

## Interactive HTML figures (Plotly)

These are real interactive Plotly plots (pan/zoom/rotate), not images:

- Linked 3D surfaces (GBM vs VG): [figs/event_iv_surfaces_gbm_vs_vg_linked_3d.html](figs/event_iv_surfaces_gbm_vs_vg_linked_3d.html)
- Linked 3D surfaces (GBM vs Merton): [figs/event_iv_surfaces_gbm_vs_merton_linked_3d.html](figs/event_iv_surfaces_gbm_vs_merton_linked_3d.html)

Generated by: [tools/make_linked_event_iv_surfaces.py](tools/make_linked_event_iv_surfaces.py)

### How to open HTML interactives

GitHub (and VS Code’s default text editor view) will often show you the HTML source.
To view it as an interactive plot, use one of these:

1) Local browser (recommended)

- Start a local server from the repo root:
  - `python -m http.server 8000`
- Then open (example):
  - `http://localhost:8000/figs/event_iv_surfaces_gbm_vs_vg_linked_3d.html`

2) VS Code

- In the Explorer, right-click the `.html` file and choose “Open in Default Browser” (or “Open With…” if prompted).

3) From a GitHub link (if you want click-to-preview)

- Use an HTML preview proxy such as https://htmlpreview.github.io/ (paste the GitHub URL to the HTML file)
  - Note: availability/CSP behavior can vary by browser.

## Notes

- Some dev environments create local copies like `figs/* - Copy.png`. These are not part of the tracked artifact set.
